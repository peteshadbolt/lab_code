import socket
from numpy import *

class client:
    def __init__(self):
        self.connected = 0
        self.sockobj = None
        self.debug=False
        self.connect()
        
    def connect(self):
        serverHost = 'localhost'
        serverPort = 50007
        print 'initializing client...', 
        self.sockobj = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        self.sockobj.connect((serverHost, serverPort))
        self.connected = True
        print 'done'

    def kill(self):
        print 'closing client...'
        self.sockobj.close()    
        self.connected=False
    
    def write_voltages(self, voltages):
        self.say('\t'.join(['%.5f' % i for i in voltages])+'\r\n')
        
    def zero(self):
        self.write_voltages([0,0,0,0,0,0,0,0])

    def say(self, command):
        self.sockobj.sendall(command)
        data = self.sockobj.recv(65536)
        return data
